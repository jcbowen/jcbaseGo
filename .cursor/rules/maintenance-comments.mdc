---
alwaysApply: true
description: 代码维护和注释规范
---

# 代码维护和注释规范

## 注释维护原则
- **禁止随意删除现有注释**，除非确认注释内容有误
- 所有关键业务逻辑都必须有详细的中文注释
- 修改代码时同步更新相关注释
- 注释应该说明"为什么"而不仅仅是"做什么"

## 代码格式要求
- **代码格式必须优雅**，避免多重嵌套
- 使用 `gofmt` 和 `goimports` 格式化代码
- 函数和方法不宜过长，建议不超过 50 行
- 复杂逻辑应该拆分为多个小函数

## 函数和方法注释格式
```go
// MethodName 方法的中文描述
// 详细说明方法的用途和实现逻辑
// 参数：
//   - param1 type: 参数1的说明
//   - param2 type: 参数2的说明
// 返回：
//   - type: 返回值的说明
//   - error: 错误信息
func (r *Receiver) MethodName(param1 type, param2 type) (type, error) {
    // 实现逻辑...
}
```

## 结构体注释格式
```go
// StructName 结构体的中文描述
// 详细说明结构体的用途和使用场景
type StructName struct {
    Field1 string `json:"field1" default:"default_value"` // 字段1的说明
    Field2 int    `json:"field2"`                         // 字段2的说明
}
```

## 包级别注释
- 每个包都应该有包级别的文档注释
- 说明包的主要功能和使用方式
- 提供简单的使用示例

## 重构和维护指导
- 重构代码时保持向后兼容性
- 弃用的功能使用 `Deprecated:` 标记
- 重要的变更需要在注释中说明原因
- 保持接口的稳定性，避免频繁的破坏性变更

## TODO 和 FIXME 标记
```go
// TODO: 需要实现的功能描述
// FIXME: 需要修复的问题描述
// NOTE: 重要说明或提醒
// HACK: 临时解决方案，需要后续优化
```
